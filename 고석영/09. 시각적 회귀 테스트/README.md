## ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ì˜ í•„ìš”ì„±

### ìŠ¤íƒ€ì¼ ë³€ê²½ ê²€ì¦ì˜ ì–´ë ¤ì›€

- CSSëŠ” ì—¬ëŸ¬ í”„ë¡œí¼í‹°ê°€ ì¤‘ì²©ë˜ì–´ ìµœì¢… ìŠ¤íƒ€ì¼ì´ ê²°ì •ë¨
- ëª…ì‹œë„, ì ìš© ìˆœì„œ, ì „ì—­ ìŠ¤íƒ€ì¼ ë“±ì˜ ì˜í–¥ì„ ë°›ìœ¼ë¯€ë¡œ ì½”ë“œë§Œìœ¼ë¡œ ì˜ˆì¸¡ì´ ì–´ë ¤ì›€
- ê°€ì¥ ì´ìƒì ì¸ ë°©ë²•ì€ ë¸Œë¼ìš°ì €ë³„ë¡œ ëª¨ë“  í˜ì´ì§€ë¥¼ ìœ¡ì•ˆìœ¼ë¡œ í™•ì¸í•˜ëŠ” ê²ƒ â†’ í˜„ì‹¤ì ìœ¼ë¡œ ì–´ë ¤ì›€
- ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ê°œë°œì´ ìŠ¤íƒ€ì¼ ë³€ê²½ì— ë¯¸ì¹˜ëŠ” ì˜í–¥
  - ğŸ‘Â ì¥ì : ë¡œì§ ë¿ë§Œ ì•„ë‹ˆë¼ CSS ì½”ë“œì˜ ì¤‘ë³µì„ ìµœì†Œí™”í•˜ì—¬ í•œ ê³³ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ
  - ğŸ‘ ë‹¨ì : í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì—¬ëŸ¬ í™”ë©´ì—ì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ìˆ˜ì • ì‹œ ì˜í–¥ ë²”ìœ„ê°€ í¼

### ìŠ¤ëƒ…ìˆ í…ŒìŠ¤íŠ¸ë¡œ ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆì„ê¹Œ?

- ìŠ¤ëƒ…ìˆ í…ŒìŠ¤íŠ¸ë„ ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ì˜ ë°©ë²• ì¤‘ í•˜ë‚˜
- ìŠ¤ëƒ…ìˆ í…ŒìŠ¤íŠ¸ì˜ í•œê³„
  - ì „ì—­ ìŠ¤íƒ€ì¼ì´ ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ì•Œê¸° ì–´ë ¤ì›€
  - HTML ì¶œë ¥ ê²°ê³¼ë¥¼ ë¹„êµí•˜ê¸° ë•Œë¬¸ì— CSS Modulesë¡œ ì •ì˜í•œ ë‚´ìš©ì„ íŒŒì•…í•  ìˆ˜ ì—†ìŒ

### ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ì˜ ì„ íƒì§€

> âœ¨Â ê°€ì¥ ì‹ ë¢°ë„ ë†’ì€ ë°©ë²•ì€ **ì‹¤ì œ ë¸Œë¼ìš°ì €ì— ë Œë”ë§ëœ í™”ë©´ì„ ë¹„êµí•˜ëŠ” í…ŒìŠ¤íŠ¸**í•˜ëŠ” ê²ƒ

- í…ŒìŠ¤íŠ¸í•  í™”ë©´ì„ ë¸Œë¼ìš°ì €ì— ë Œë”ë§í•˜ê³  **íŠ¹ì • ì‹œì ì— ìº¡ì²˜í•œ ì´ë¯¸ì§€ë“¤ì„ í”½ì…€ ë‹¨ìœ„ë¡œ ë¹„êµ**
- ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ëŠ” í—¤ë“œë¦¬ìŠ¤ ë¸Œë¼ìš°ì €ë¥¼ ì‹¤í–‰í•œ ìƒíƒœì—ì„œ ì‹¤ì‹œ
- E2E í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ì—ëŠ” í—¤ë“œë¦¬ìŠ¤ ë¸Œë¼ìš°ì €ê°€ í¬í•¨ë˜ì–´ ìˆìŒ
- ë”°ë¼ì„œ ëŒ€ë¶€ë¶„ E2E í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ëŠ” ê³µì‹ì ìœ¼ë¡œ ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ ì§€ì›
  - í”„ë ˆì„ì›Œí¬ëŠ” í—¤ë“œë¦¬ìŠ¤ ë¸Œë¼ìš°ì €ì— í™”ë©´ì„ ìš”ì²­í•˜ê³  í™”ë©´ì´ ì´ë™í•˜ë©´ í™”ë©´ì„ ìº¡ì²˜
  - ì´ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ëª¨ë“  í˜ì´ì§€ë¥¼ ìº¡ì²˜í•˜ë©´ ìŠ¤íƒ€ì¼ ë³€ê²½ ì „í›„ì˜ ì°¨ì´ì  ë°œê²¬ ê°€ëŠ¥
- ìŠ¤íƒ€ì¼ ë³€ê²½ ì „í›„ì˜ ì´ë¯¸ì§€ë¥¼ ë¹„êµí•˜ë©´ ì–´ë–¤ í™”ë©´ì´ ë³€ê²½ëëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë‚˜ ì„¸ì„¸í•˜ê²Œ ì•Œ ìˆ˜ëŠ” ì—†ìŒ
  - ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ë¥¼ UI ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ë¡œ ì‹¤ì‹œ â†’ ìŠ¤í† ë¦¬ë¶ í™œìš©

> [!NOTE]
>
> #### ğŸ¯ í—¤ë“œë¦¬ìŠ¤ ë¸Œë¼ìš°ì €(Headless Browser)
>
> - GUI ì—†ì´ ëª…ë ¹ì–´ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ì›¹ë¸Œë¼ìš°ì €
> - ì¼ë°˜ì ì¸ ë¸Œë¼ìš°ì €ì²˜ëŸ¼ HTMLì„ ë Œë”ë§í•˜ê³ , JavaScriptë¥¼ ì‹¤í–‰í•˜ë©°, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ì²˜ë¦¬
> - UI ë Œë”ë§ì´ ì—†ì–´ì„œ ì¼ë°˜ ë¸Œë¼ìš°ì €ë³´ë‹¤ ëŒ€ì²´ë¡œ ë¹ ë¥¸ í¸
> - ìë™í™”ì— ìµœì í™”ë˜ì–´ í…ŒìŠ¤íŠ¸, ì›¹ ìŠ¤í¬ë˜í•‘ ë“±ì— ì‚¬ìš© (Playwright, Cypress, Puppeteer ë“±)
>
> #### ğŸ¯ í—¤ë“œë¦¬ìŠ¤ ë¸Œë¼ìš°ì €ë¡œ ì›¹ì‚¬ì´íŠ¸ ìº¡ì²˜í•˜ê¸°
>
> ```bash
> $ alias chrome="/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome"  # Chrome ìœ„ì¹˜
> $ chrome --headless --screenshot --window-size=1920,1080 https://github.com/Book-Study-For-Developer
> ```
>
> ![screenshot.png](./screenshot.png)
>
> - Chrome 59ë¶€í„° ì œê³µëœ ì´ˆê¸° í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ - [í—¤ë“œë¦¬ìŠ¤ Chrome ì‹œì‘í•˜ê¸°](https://developer.chrome.com/blog/headless-chrome?hl=ko)
> - Chrome 112ë¶€í„° ì œê³µëœ í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ - [Chrome í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ](https://developer.chrome.com/docs/chromium/headless?hl=ko)
> - https://blog.outsider.ne.kr/1291

## `reg-cli`ë¡œ ì´ë¯¸ì§€ ë¹„êµí•˜ê¸°

> âœ¨Â `reg-suit`ì˜ í•µì‹¬ ê¸°ëŠ¥<br/>
> âœ¨Â ê¸°ì¡´ ì´ë¯¸ì§€ì™€ ë¹„êµí•  ì´ë¯¸ì§€ë¥¼ ë‹´ì€ ë””ë ‰í„°ë¦¬ë¥¼ ë¹„êµí•´ì„œ ê·¸ ì°¨ì´ì ì„ ë¦¬í¬íŠ¸ë¡œ ì¶œë ¥

```bash
$ mkdir vrt && vrt
$ mkdir {actual,expected,diff}
```

- ê¸°ì¡´ ì´ë¯¸ì§€ì™€ ë¹„êµí•  ì´ë¯¸ì§€ë¥¼ ë‹´ì€ ë””ë ‰í„°ë¦¬ë¥¼ ë¹„êµí•´ì„œ ê·¸ ì°¨ì´ì ì„ ë¦¬í¬íŠ¸ë¡œ ì¶œë ¥
- ê° ë””ë ‰í„°ë¦¬ì— ì´ë¯¸ì§€ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì´ë¯¸ì§€ ê°„ ì°¨ì´ì ì„ ê²€ì¶œ
  - `actual`: ê¸°ì¡´ ì´ë¯¸ì§€
  - `expected`: ë¹„êµí•  ì´ë¯¸ì§€
  - `diff`: ë¹„êµ ê²°ê³¼ë¥¼ ê²€ì¶œí•œ ì´ë¯¸ì§€
- ì§ì ‘ í™•ì¸í•´ë³´ì â†’ [reg-viz.github.io/reg-cli/](https://reg-viz.github.io/reg-cli/)

## Storycap ë„ì…

> âœ¨Â ìŠ¤í† ë¦¬ë¶ì„ í™œìš©í•œ ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸

```bash
$ npm install storycap --save-dev
```

### Storycap ì„¤ì •

- Storybook ì„¤ì • íŒŒì¼ì— Storycap ì„¤ì • ì¶”ê°€

```jsx
// preview.js
import { withScreenshot } from 'storycap'

export const decorators = [withScreenshot]
```

```jsx
// main.js
module.exports = {
  addons: ['storycap'],
}
```

### Storycap ì‹¤í–‰

```json
// package.json
{
  "scripts": {
    "storybook:build": "storybook build",
    "storycap": "storycap --serverCmd \"npx http-server storybook-static -a localhost -p 6006\" http://localhost:6006"
  }
}
```

![storycap-cli.png](./storycap-cli.png)

- Storybook ë¹Œë“œ â†’ Storycap ì‹¤í–‰ â†’ ëª¨ë“  ìŠ¤í† ë¦¬ ìº¡ì²˜
  - ì´ë•Œ ë§Œë“¤ì–´ì§€ëŠ” ì •ì  ì‚¬ì´íŠ¸ëŠ” `storybook-static` í•˜ìœ„ì— ìƒê¹€
  - ìº¡ì²˜ê°€ ì™„ë£Œëœ ì´ë¯¸ì§€ëŠ” `__screenshots__` ë””ë ‰í„°ë¦¬ì— ì €ì¥ë¨

![storycap-html.png](./storycap-html.png)

## reg-suit + AWS S3 + Github Actions

> âœ¨Â ê¹ƒí—ˆë¸Œ ì—°ë™ì„ í†µí•œ ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ ìë™í™”

![github-flow.png](./github_flow.png)

- `Fetch Expected`: topic ë¸Œëœì¹˜ì—ì„œ ë¹„êµ ê¸°ì¤€ì´ ë  Expected ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ê¸°
- `Push Actual`: topic ë¸Œëœì¹˜ì—ì„œ í˜„ì¬ ìƒíƒœì˜ Actual ì´ë¯¸ì§€ë¥¼ ì €ì¥ì†Œì— í‘¸ì‹œ
- `Compare`: Expected ì´ë¯¸ì§€ì™€ Actual ì´ë¯¸ì§€ë¥¼ ë¹„êµí•´ì„œ ì‹œê°ì  ì°¨ì´ ê²€ì¶œ

![reg-suit.png](./reg-suit.png)

- `reg-keygen-git-hash-plugin`: git ì»¤ë°‹ í•´ì‹œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê³ ìœ í•œ ì´ë¯¸ì§€ íŒŒì¼ ì´ë¦„ ìƒì„±
- `reg-publish-s3-plugin`: Amazon S3ì— ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì—…ë¡œë“œ
- `reg-notify-github-plugin`: GitHub PRì— ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì•Œë¦¼

![github-actions.png](./github-actions.png)

> #### ğŸ¯ Github Actions
>
> - `name`: ì›Œí¬í”Œë¡œìš°ì˜ ì´ë¦„
> - `on`: ì›Œí¬í”Œë¡œìš°ë¥¼ íŠ¸ë¦¬ê±°í•˜ëŠ” ì´ë²¤íŠ¸
> - `env`: ì›Œí¬í”Œë¡œìš°ì—ì„œ ì°¸ì¡°í•˜ëŠ” í™˜ê²½ ë³€ìˆ˜
> - `jobs`: ì›Œí¬í”Œë¡œìš°ì—ì„œ ì‹¤í–‰í•  ì‘ì—…ë“¤
> - `runs-on`: ì‘ì—…ì´ ì‹¤í–‰ë  ê°€ìƒ í™˜ê²½ì˜ ìš´ì˜ì²´ì œ
> - `steps`: ê° ì‘ì—…ì—ì„œ ì‹¤í–‰í•  ëª¨ë“  ìŠ¤í…
> - `uses`: `steps`ì—ì„œ ì•¡ì…˜ì„ ì‚¬ìš©í•  ë•Œ ì„ ì–¸
>   - `actions/checkout`: CI í™˜ê²½ì—ì„œ ì €ì¥ì†Œ ì ‘ê·¼
>   - `actions/setup-node`: CI í™˜ê²½ì— íŠ¹ì • ë²„ì „ì˜ Node.js ì„¤ì¹˜
> - `run`: CI í™˜ê²½ì—ì„œ ì‹¤í–‰í•  ì»¤ë§¨ë“œ

## ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ë¥¼ í™œìš©í•œ ì ê·¹ì  ë¦¬íŒ©í„°ë§

- ë°˜ì‘í˜• ë””ìì¸ì— í™œìš©í•˜ê¸°
- ë¦´ë¦¬ìŠ¤ ì§ì „ì— ì‹¤ì œë¡œ í•„ìš”í•œ CSS ì½”ë“œë§Œ ë‚¨ê¸°ëŠ” ë¦¬íŒ©í„°ë§ìœ¼ë¡œ í™œìš© ê°€ëŠ¥
- ìŠ¤í† ë¦¬ ì»¤ë°‹ ìŠµê´€í™”ë¡œ ìŠ¤í† ë¦¬ ë‹¨ìœ„ë¡œ ì‹œê°ì  íšŒê·€ í…ŒìŠ¤íŠ¸ ì‹¤ì‹œ ê°€ëŠ¥

## Chromaticë¡œ ì‹œê°ì  í…ŒìŠ¤íŠ¸

> Chromatic is a **visual testing & review tool** that scans every possible UI state across browsers to catch visual and functional bugs before they reach users. Assign reviewers and resolve discussions to streamline team sign-off.<br/>
> âœ¨Â ì‹œê°ì  í…ŒìŠ¤íŠ¸ ë° ë¦¬ë·° ìë™í™”

### í”„ë¡œì íŠ¸ì— Chromatic ì—°ë™í•˜ê¸°

> í›„ê¸°: í¬ë¡œë§ˆí‹±ì´ ì•Œì•„ì„œ ë‹¤ í•´ì¤Œ..ğŸ¥¹

- https://www.chromatic.com/

> [!NOTE]
>
> ğŸ˜°Â í¬ë¡œë§ˆí‹±ì´ `build-storybook` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì½ì–´ì„œ í”„ë¡œì íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ì—°ë™í•´ì£¼ê¸° ë•Œë¬¸ì— ì´ì „ Storycapì„ ì‚¬ìš©í•˜ë©´ì„œ ë³€ê²½í–ˆë˜ `storybook:build` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ì‹œ ë˜ëŒë ¤ì•¼í•œë‹¤..
>
> ```jsx
> "build-storybook": "storybook build", // Storybook ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ëª…ì„ ê¼­ build-storybookìœ¼ë¡œ ì§€ì •
> ```
>
> ğŸ˜‡ ì´ê²ƒë§Œ ì£¼ì˜í•˜ë©´ ë‚˜ë¨¸ì§€ëŠ” í¬ë¡œë§ˆí‹±ì´ ì•Œì•„ì„œ ë‹¤ í•´ì¤€ë‹¤... .

|                      ë³€ê²½ ì „                      |                      ë³€ê²½ í›„                      |
| :-----------------------------------------------: | :-----------------------------------------------: |
| ![chromatic-setup-a.png](./chromatic-setup-a.png) | ![chromatic-setup-b.png](./chromatic-setup-b.png) |

> âœ¨ ë¦¬ë·° ê¸°ëŠ¥ë„ ìˆë‹¤!

![chromatic-review.png](./chromatic-review.png)

> [!NOTE]
>
> #### ğŸ¯ reg-suit vs Chromatic ?
>
> ë‘˜ ë‹¤ ì´ë²ˆ ì±…ì„ ì½ìœ¼ë©´ì„œ ì²˜ìŒ ì¨ë´¤ë‹¤. ê·¸ë˜ì„œ ë‹¨í¸ì ì¸ ë¹„êµì¼ ìˆ˜ ìˆì§€ë§Œ... ë‚˜ë¼ë©´ í¬ë¡œë§ˆí‹±ì„ ì“¸ ê²ƒ ê°™ë‹¤.
> <br/>(ì••ë„ì ìœ¼ë¡œ í¸í–ˆë‹¤. ì´ì „ì— ì´ë¯¸ ì›Œí¬í”Œë¡œìš°ë¥¼ ì„¤ì •í•´ì¤€ íƒ“ë„ ìˆì§€ë§Œ..)
>
> ìŠ¤í† ë¦¬ë¶ê³¼ì˜ ì—°ë™ë„ ì¢‹ì•˜ê³ , íŠ¹íˆ PRì—ì„œ ë³€ê²½ëœ UI ë‚´ìš© ë¿ë§Œ ì•„ë‹ˆë¼ í•´ë‹¹ ë³€ê²½ ì‚¬í•­ì´ ì ìš©ëœ ë°°í¬ëœ ìŠ¤í† ë¦¬ë¶ë„ ë³¼ ìˆ˜ ìˆì–´ ì—¬ëŸ¬ ì‚¬ëŒê³¼ í˜‘ì—… ë©´ì—ì„œ ì¢‹ì•„ ë³´ì˜€ë‹¤.
>
> ![github-chromatic.png](./github-chromatic.png)
>
> - [Automate Chromatic with GitHub Actions](https://www.chromatic.com/docs/github-actions/)
