# 테스트 목적과 장애물

## 테스트 방법

- 함수 단위 테스트
- UI 컴포넌트와 단위 테스트
- UI 컴포넌트와 통합 테스트 (외부 요인을 포함한 테스트)
- UI 컴포넌트와 시각적 회귀 테스트 (CSS가 적용된 출력 결과를 검증)
- E2E 테스트 (브라우저 고유의 API를 사용하거나 화면 간 테스트가 필요할 때 적합, 실제 애플리케이션에 가깝게 상황 재현)

+. 리액트는 자바스크립트 확장 문법인 JSX를 기반으로 UI 컴포넌트를 만드는 라이브러리

## 테스트 프레임워크 및 도구

- 제스트: 명령줄 인터페이스 기반 테스트 프레임워크 및 테스트 러너
- 플레이라이트 : 헤드리스 브라우저를 포함한 테스트 프레임워크 및 테스트 러너
- reg-suit : 시각적 회귀 테스트 프레임워크
- 스토리북 : UI 컴포넌트 탐색기

## 테스트를 작성해야 하는 이유

- 사업의 신뢰성
  - 버그는 서비스의 이미지를 추락시킴. 테스트 코드가 예상하지 못한 버그를 조기에 발견해 서비스 이미지를 지켜주는 역할을 함
- 높은 유지 보수성
  - 리팩토링을 진행하기에 앞서 해당 코드가 이미 사용중이던 부분에 대한 안정성을 보장하지 못해 리팩토링을 진행하지 못하는 부분에서 테스트 코드가 있다면 문제를 확인할 수 있어 리팩터링 시 안정감을 느낄 수 있음
- 코드 품질 향상
  - 구현된 코드의 테스트 작성이 어렵다면 해당 코드가 너무 많은 역할을 한다는 신호일 수 있음. 이 경우 일부 책임을 더 작은 부분으로 나눌 수 있는지 재검토해 더 좋은 코드를 작성할 수 있음
  - 웹 접근성(신체적, 정신적 특성에 따른 차이 없이 동등하게 정보에 접근할 수 있어야 함)을 높이는데도 기여함
  - UI 컴포넌트 테스트 시 웹 접근성에서 유래한 API로 테스트 대상을 선택할 때가 많음
- 원활한 협업
  - 제품의 사양을 파악하는 수단으로서 개발자 간 협업이 원활해지도록 도와줌
- 회귀 테스트 줄이기
  - 모듈을 작게 나눠 만들면 모듈이 가진 책임은 줄어들고 테스트도 쉬워진다. 하지만 모듈이 많아지면 나눠진 모듈을 다시 조합하는 과정에서 모듈 간 의존 관계가 생기고, 의존중인 모듈이 변경 됐을 때 미치는 영향을 검증하고자 자주 회귀 테스트를 해야함
  - UI 컴포넌트는 기능과 함께 시각적 결과물도 제공함. 단위 테스트가 있어도 시각적 결과물에는 회귀 테스트가 필요함

## 테스트 작성의 장벽

- 테스트를 작성하는 습관의 부재
- 테스트를 작성할 시간에 기능 추가를 원함
- 팀원들의 기술력 부족으로 유지할 자신이 없음

위와 같은 문제를 극복하고 팀에 테스트 코드를 작성하는 문화를 정착시키기 위해 어떻게 해야 할까?

- 실제 사용되는 테스트 코드를 복사, 붙여넣기 하며 반복하다보면 익숙해지기
- 프론트엔드 수명이 짧다는 인식이 있고, 그런 경우가 많은 것이 사실이지만 재건축의 경우에도 테스트가 작성되어있다면 문제를 빠르게 인식할 수 있어 재구축시에도 좋음
- 단기적으로는 많은 시간을 소모하지만, 장기적인 관점에서 보면 오히려 시간이 절약됨
  - 버그가 발생하는 경우의 예시로 QA 팀이 티켓을 발행하고 소통하는 과정의 시간이 포함되면 결국 테스트 코드를 작성한 작업자와 그렇지 않은 작업자가 기능 개발을 안정적으로 하는 것의 시간차는 동일할 수 있다. 지속적인 버그 발생시에는 테스트 코드를 작성한 작업자가 더 시간을 절약할 수 있게 된다.
- 프로젝트 초기 단계에서 테스트 코드를 작성하는 문화를 만들어야 함

<br/><br/>

---

### 더 알아보기

- MSA(Micro Service Architecture)
  독립적인 배포가 가능한 서비스들로 구성된 아키텍쳐를 의미
  각 서비스를 도메인별로 분리시키고, 서비스는 작은 서비스의 집합으로 구성되며 독립적이고 단일 비즈니스 기능에 대한 책임만을 가짐
  프론트엔드 관점에서는 각 서비스가 기능별로 흩어져 있어 화면을 완성하기 위해 호출해야하는 서비스가 늘어나는 단점이 발생한다. 따라서 화면을 그리기 위해 다수의 서비스에 연동을 해야하며, 여러 서비스에 분산되어 있는 데이터를 가져와 적절히 합쳐야 하는 경우가 발생하게 된다.

- BFF(BackEnd For FrontEnd)
  프론트엔드를 위한 백엔드 서버를 의미, 프론트엔드를 요구사항에 맞게 구현하기 위한 도움을 주는 보조 서버
  위 MSA의 단점을 보완하기 위해 등장
  - 프론트엔드에서 복잡한 로직을 감추고 추상화된 인터페이스 사용 가능
