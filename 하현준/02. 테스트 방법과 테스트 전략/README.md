> 쓴이는 책을 모두 읽고 이번 챕터를 한번 읽어보는 것을 추천한다.

## 테스트 범위

테스트 범위에 따른 테스트 종류들

**정적 분석**

- 타입스크립트나 ESLint를 사용하는 분석

**단위 테스트**

- 한 가지 모듈에 한정하여 해당 모듈이 제공하는 기능을 검증하는 테스트
- 실제 애플리케이션에 발생하지 않는 케이스(코너 케이스) 검증에 적합

**통합 테스트**

- 모듈 조합으로 제공되는 기능을 검증하는 테스트

**E2E 테스트**

- 헤드리스 브라우저와 UI 자동화 도구를 결합하여 검증하는 테스트
- QA에서 테스트하는 방식과 유사한 테스트

## 테스트 목적

테스트 목적에 따라 분류된 테스트들

**기능 테스트(인터랙션 테스트)**

- UI 컴포넌트 조작을 검증하는 테스트

**비기능 테스트(접근성 테스트)**

- 신체적, 정신적 특성에 따른 차이 없이 동등하게 제품을 사용할 수 있는지 검증하는 테스트
- 웹 접근성을 테스트 한다고 보면 된다

**회귀 테스트**

- 특정 시점을 기준으로 전후 차이를 비교하여 문제가 있는지 검증하는 테스트

## `프론트엔드`에서 테스트 범위

**정적 분석**

- 타입스크립트: 타입 추론을 통해 **런타임 작동을 예측**해준다.
- ESLint: deprecated된 API나 코드 작성법을 지속적으로 알려준다. (ex) useEffect 의존성 배열에 빠져있는 부분 표기

**단위 테스트**

- 순수 함수, 계산 함수를 테스트하는게 가장 보편적
- 입력값에 올바른 출력값을 반환하는지 테스트할 수 있다.

**통합 테스트**

- 여러 모듈을 연동한 기능을 테스트
  - 셀렉트 박스를 조작 → URL 검색 쿼리가 변경 → 검색 쿼리가 변경되어 데이터 취득 API 가 호출 → 목록화면 내용을 갱신

**E2E 테스트**

- UI 테스트 검증 + 외부 스토리지와 연동중인 하위 시스템까지 테스트한다.

## `프론트엔드`에서 테스트 목적

**기능 테스트(인터렉션 테스트)**

- 프론트엔드에서는 UI 컴포넌트 조작하는 인터렉션을 테스트하는 것이 대부분

**비기능 테스트(접근성 테스트)**

- 프론트엔드에서는 접근성을 테스트하는 것이 대부분
  - ‘키보드만으로 웹사이트를 이용할 수 있는가?’, ‘명암비가 시인성에 문제는 없는가’

**시각적 회귀 테스트**

- CSS는 모든 스타일에 영향을 받는다.
  - 헤드리스 브라우저에 그려진 내용을 캡쳐하여 캡쳐된 이미지 간 차이를 검증

## 테스트 전략 모델

https://fe-developers.kakaoent.com/2023/230209-e2e/

![image](https://github.com/user-attachments/assets/9f236b58-f731-4b7c-9248-bc7908b2603a)

위로 갈수록 테스트의 비용과 시간은 늘어나고, 안정성은 떨어진다. 이를 최적화하여 테스트 모델을 짜야한다.

### 아이스크림 콘과 테스트 피라미드

아이스크림 콘: 상층부 테스트의 비중이 높은 모델이며, 안티패턴으로 간주된다.

테스트 피라미드: 하층부 테스트 비중이 높은 모데링며 가성비 높은 테스트가 가능하다.

하층부 테스트는 실행 시간이 짧고, 안정성도 높기 때문에 우수한 전략 모델이다.

### 테스팅 트로피

프론트엔드에서는 단일 UI 컴포넌트로 구현되는 기능은 거의 없다. 그리고 프론트엔드에서의 기능은 UI 조작을 통해 시작하기 때문에 **통합 테스트의 비중이 높을 수록 우수한 테스트 전략**이라는 것이다.

![image](https://github.com/user-attachments/assets/9c998a6b-3925-419a-ae6e-f493cd607868)

## 테스트 전략 계획

테스트 대상 및 목적에 따라 판단 기준을 정해야 한다.

**테스트가 없어 리팩터링이 불안한 경우**

- 릴리스된 기능을 정리한 후에 기능 변경 전후로 결함을 검증하는 `회귀 테스트`를 작성해야 한다.
- 웹 API 와의 의존성을 끊어내기 위해 목 서버를 활용하여 통합 테스트를 실시한다.

**반응형으로 제작된 프로젝트**

- 하나의 파일로 여러 화면을 제공하는 반응형일 경우 PC 버전만 수정하였는데 모바일에서 CSS가 깨지는 상황이 발생할 수 있다.
- 이러한 상황을 대비하여 `시각적 회귀 테스트`를 해야 한다.
  - 스토리북을 사용, reg-suit를 활용

**데이터베이스를 포함한 E2E 테스트가 필요한 경우**

- 목 서버가 아닌 실제 API를 활용하여 테스트하기 위해서는 스테이징 환경(실제 환경과 비슷한 환경)이 필요
- 스테이징 환경을 만들지 않고 하기 위해서는 테스트할 시스템을 컨테이너화(Docker)해서 CI환경에서 실행한 뒤 연동중인 여러 시스템과 함께 테스트
  - 그러나 이는 테스트 사용법 뿐만 아니라 컨테이너 가상화에 대한 추가 지식이 필요
