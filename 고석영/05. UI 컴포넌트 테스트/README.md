## UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ê¸°ì´ˆ ì§€ì‹

### MPAì™€ SPAì˜ ì°¨ì´ì 

- ë©€í‹° í˜ì´ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜(MPA): ì—¬ëŸ¬ HTML í˜ì´ì§€ì™€ HTTP ìš”ì²­ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
  - â€˜í˜ì´ì§€ ìš”ì²­ ë‹¨ìœ„â€™ì— ê¸°ë°˜í•˜ì—¬ ì‚¬ìš©ìì™€ ëŒ€í™”í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œë°œ
- ì‹±ê¸€ í˜ì´ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜(SPA): í•œ ê°œì˜ HTML ê°œë°œí•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
  - ì›¹ ì„œë²„ê°€ ì‘ë‹µìœ¼ë¡œ ë³´ë‚¸ ìµœì´ˆì˜ HTML í˜ì´ì§€ë¥¼ ì‚¬ìš©ì ì…ë ¥ì— ë”°ë¼ ë¶€ë¶„ì ìœ¼ë¡œ HTML ë³€ê²½

### UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

- ë²„íŠ¼ê³¼ ê°™ì€ ì‘ì€ ë‹¨ìœ„ì˜ UI ì»´í¬ë„ŒíŠ¸ë¥¼ í•˜ë‚˜ì”© ì¡°í•©í•˜ì—¬ í™”ë©´ ë‹¨ìœ„ì˜ UIë¥¼ ì™„ì„±
- ë§Œì•½ ê³ ë ¤í•´ì•¼ í•  ì‚¬í•­ì„ ë¹ ëœ¨ë ¤ì„œ ì¤‘ê°„ í¬ê¸°ì˜ UI ì»´í¬ë„ŒíŠ¸ì— ë¬¸ì œê°€ ìƒê¸´ë‹¤ë©´?
- í…ŒìŠ¤íŠ¸ë¥¼ ê³ ë ¤í•´ì•¼ í•  UI ì»´í¬ë„ŒíŠ¸ ê¸°ëŠ¥
  - ë°ì´í„°ë¥¼ ë Œë”ë§í•˜ëŠ” ê¸°ëŠ¥
  - ì‚¬ìš©ìì˜ ì…ë ¥ì„ ì „ë‹¬í•˜ëŠ” ê¸°ëŠ¥
  - ì›¹ APIì™€ ì—°ë™í•˜ëŠ” ê¸°ëŠ¥
  - ë°ì´í„°ë¥¼ ë™ì ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ê¸°ëŠ¥
- _ì˜ë„í•œ ëŒ€ë¡œ ì‘ë™í•˜ê³  ìˆëŠ”ê°€?_ + _ë¬¸ì œê°€ ìƒê¸´ ë¶€ë¶„ì´ ì—†ëŠ”ê°€?_

### ì›¹ ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸

- ì›¹ ì ‘ê·¼ì„±: ì‹ ì²´ì , ì •ì‹ ì  íŠ¹ì„±ì— ë”°ë¥¸ ì°¨ì´ ì—†ì´ ì •ë³´ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì •ë„ë¥¼ ì¸¡ì •í•˜ëŠ” ê¸°ì¤€
- í™”ë©´ì— ë³´ì´ëŠ” ë¬¸ì œê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì˜ì‹ì ìœ¼ë¡œ ì‹ ê²½ ì¨ì•¼ë§Œ ì•Œ ìˆ˜ ìˆìŒ

> [!NOTE]
>
> #### ğŸ¯Â ì›¹ í‘œì¤€ì„ ì˜ ì§€í‚¨ë‹¤ â‰  ì›¹ ì ‘ê·¼ì„±ì„ ì™„ë²½íˆ ë³´ì¥í•œë‹¤
>
> - **ì›¹ í‘œì¤€(Web Standards):** ì–´ë–¤ ìš´ì˜ì²´ì œë‚˜ ì–´ëŠ ë¸Œë¼ìš°ì €ì—ì„œë“  ìƒê´€ì—†ì´Â ì›¹ì‚¬ì´íŠ¸ê°€ í•­ìƒ ë™ì¼í•˜ê²Œ ë³´ì—¬ì§€ë„ë¡Â í‘œì¤€ì„ ë§ì¶”ëŠ” ê²ƒ
> - **ì›¹ ì ‘ê·¼ì„±(Web Accessibility, a11y)**: ì¥ì• ì¸, ê³ ë ¹ì ë“±ì„ í¬í•¨í•œ ëª¨ë“  ì¸í„°ë„· ì‚¬ìš©ìê°€Â **ì›¹**ì‚¬ì´íŠ¸ì— ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ëŠ” ê²ƒ
>
> _ì›¹ í‘œì¤€ì´ ì›¹ ì ‘ê·¼ì„±ì„ ë†’ì´ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” ê²ƒì€ ì‚¬ì‹¤ì´ì§€ë§Œ, ì™„ë²½íˆ ë³´ì¥í•´ ì£¼ëŠ” ê²ƒì€ ì•„ë‹˜!_
>
> #### ğŸ¯Â ARIA(Accessible Rich Internet Applications)
>
> - W3Cì˜ í•˜ìœ„ ì§‘í•©ì¸ WAIì—ì„œ ë°œí‘œí•œ ì›¹ ì ‘ê·¼ì„± ëª…ì„¸ì„œ â†’ ê·¸ë˜ì„œ WAI-ARIA
> - ì‹¤ì œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ê°€ ì•„ë‹ˆë¼ HTML ìš”ì†Œì— ì •ë³´ë¥¼ ì¶”ê°€í•˜ì—¬ ì ‘ê·¼ì„± í–¥ìƒ
>   - ì—­í• (Role): UIì— í¬í•¨ëœ íŠ¹ì • ì»´í¬ë„ŒíŠ¸ì˜ ì—­í• ì„ ì •ì˜
>   - ì†ì„±(Property): í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ íŠ¹ì§•ì´ë‚˜ ìƒí™©ì„ ì •ì˜í•˜ë©° ì†ì„±ëª…ìœ¼ë¡œ `aria-` ì ‘ë‘ì‚¬ë¥¼ ì‚¬ìš©
>   - ìƒíƒœ(State): í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœ ì •ë³´ë¥¼ ì •ì˜
> - ARIAì˜ 5ê°€ì§€ ê·œì¹™
>   - ìµœëŒ€í•œ HTML5ì˜ ì‹œë§¨í‹± íƒœê·¸ê°€ ì§€ì›í•˜ëŠ” ARIA ì‚¬ìš©í•˜ê¸°
>   - ë¶ˆí•„ìš”í•œ ARIA ì¶”ê°€í•˜ì§€ ì•Šê¸°
>   - í‚¤ë³´ë“œ íƒìƒ‰ ì§€ì›í•˜ê¸° â†’ `tabindex="0"`
>   - í¬ì»¤ìŠ¤ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ìš”ì†Œë¥¼ ìˆ¨ê¸°ì§€ ì•Šê¸° â†’ `aria-hidden="true"` / `role="presentation"`
>   - ëŒ€í™”í˜• ìš”ì†Œì— ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„ ì‚¬ìš©í•˜ê¸°
>
> #### ì°¸ê³  ë§í¬â€¦
>
> - [ì›¹ ì ‘ê·¼ì„± ì¤€ìˆ˜ë¥¼ í†µí•œ ëª¨ë‘ì—ê²Œ ë°°ë‹¬ë˜ëŠ” ì¼ìƒì˜ í–‰ë³µ](https://techblog.woowahan.com/15541/)
> - [ARIA ë° HTML - web.dev](https://web.dev/learn/accessibility/aria-html?hl=ko)
> - [Using ARIA - W3C docs](https://www.w3.org/TR/using-aria/#rule1)
> - [Document conformance requirements for use of ARIA attributes in HTML - W3C docs](https://www.w3.org/TR/html-aria/#dfn-no-corresponding-role)

- ë§ˆìš°ìŠ¤ë¥¼ ì“°ëŠ” ì‚¬ìš©ìì™€ ë³´ì¡° ê¸°ê¸°ë¥¼ ì“°ëŠ” **ì‚¬ìš©ìê°€ ë™ì¼í•˜ê²Œ ìš”ì†Œë“¤ì„ ì¸ì‹í•  ìˆ˜ ìˆëŠ” ì¿¼ë¦¬ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì—** UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ëŠ” ì›¹ ì ‘ê·¼ì„± í–¥ìƒ ì¸¡ë©´ì—ì„œ ì¢‹ì€ ì„ íƒì§€
  - ì ‘ê·¼ì„± ì¹œí™”ì ì¸ ì¿¼ë¦¬ ì‚¬ìš© â†’ `getByRole`, `getByLabelText`, `getByText` ë“±

## ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

### UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶•

- UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬
  - `jest-environment-jsdom`
  - `@testing-library/react`
  - `@testing-library/jest-dom`
  - `@testing-library/user-event`
- ê¸°ë³¸ì ì¸ í…ŒìŠ¤íŠ¸ í™˜ê²½ì€ `jest.config.js`ì˜ `testEnvironment`ì— ì§€ì •

```jsx
module.exports = {
  testEnvironment: 'jest-environment-jsdom',
}
```

```jsx
/**
 * @jest-environment jest-environment-jsdom
 */
```

### í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬

- í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ê¸°ë³¸ ì›ì¹™ â†’ _í…ŒìŠ¤íŠ¸ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ì˜ ì‚¬ìš©ë²•ê³¼ ìœ ì‚¬í•´ì•¼ í•œë‹¤_
- í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì—­í• 
  - UI ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
  - ë Œë”ë§ëœ ìš”ì†Œì—ì„œ ì„ì˜ì˜ ìì‹ ìš”ì†Œ ì·¨ë“
  - ë Œë”ë§ëœ ìš”ì†Œì— ì¸í„°ë™ì…˜ ìœ ë°œ
- ê³µí†µì ìœ¼ë¡œ `@testing-library/dom`ì„ ì½”ì–´ë¡œ ì‚¬ìš©
- `@testing-library/jest-dom`ì˜ ì»¤ìŠ¤í…€ ë§¤ì²˜ë¼ëŠ” ì œìŠ¤íŠ¸ì˜ í™•ì¥ ê¸°ëŠ¥ì„ í†µí•´ UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì—¬ëŸ¬ ë§¤ì²˜ ì‚¬ìš© ê°€ëŠ¥
- ì´ë²¤íŠ¸ ë°œìƒì„ ìœ„í•´ì„œëŠ” `fireEvent` API ë³´ë‹¤ëŠ” ì‹¤ì œ ì‚¬ìš©ìì˜ ì…ë ¥ì— ê°€ê¹ê²Œ ì‹œë®¬ë ˆì´ì…˜ì´ ê°€ëŠ¥í•œ `@testing-library/user-event`ë¥¼ ì¶”ê°€ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥

## ì²˜ìŒ ì‹œì‘í•˜ëŠ” UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

### í…ŒìŠ¤íŠ¸í•  UI ì»´í¬ë„ŒíŠ¸

```tsx
type Props = {
  name: string
  onSubmit?: (event: React.FormEvent<HTMLFormElement>) => void
}

export const Form = ({ name, onSubmit }: Props) => {
  return (
    <form
      onSubmit={event => {
        event.preventDefault()
        onSubmit?.(event)
      }}
    >
      <h2>ê³„ì • ì •ë³´</h2>
      <p>{name}</p>
      <div>
        <button>ìˆ˜ì •</button>
      </div>
    </form>
  )
}
```

- propsë¡œ ë³´ë‚¸ `name`ì´ í™”ë©´ì— ì˜ ë Œë”ë§ ë˜ëŠ”ì§€?
- â€˜ìˆ˜ì •â€™ ë²„íŠ¼ì´ í™”ë©´ì— ì˜ ë Œë”ë§ ë˜ëŠ”ì§€?
- â€˜ê³„ì • ì •ë³´â€™ í…ìŠ¤íŠ¸ê°€ í™”ë©´ì— ì˜ ë Œë”ë§ ë˜ëŠ”ì§€?
- â€˜ìˆ˜ì •â€™ ë²„íŠ¼ì„ í´ë¦­ ì‹œ `onSubmit` ì´ë²¤íŠ¸ê°€ ì˜ í˜¸ì¶œë˜ëŠ”ì§€?

### UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

- UI ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ â†’ `render` í•¨ìˆ˜
- ë‹¨ì–¸ë¬¸ ì‘ì„± â†’ `@testing-library/jest-dom`ìœ¼ë¡œ í™•ì¥í•œ ì»¤ìŠ¤í…€ ë§¤ì²˜ ì‚¬ìš©
  - `toBeInTheDocument` â†’ í•´ë‹¹ ìš”ì†Œê°€ DOMì— ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì¦
  - `toHaveTextContent` â†’ í•´ë‹¹ ìš”ì†Œì— ì›í•˜ëŠ” ë¬¸ìê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ ê²€ì¦
  - `toMatchSnapshot` â†’
- `screen.getByText` â†’ ë¬¸ìì—´ë¡œ íŠ¹ì • DOM ìš”ì†Œ ì°¾ê¸°
- `screen.getByRole` â†’ HTML ì†ì„±ì¸ `role`ë¡œ íŠ¹ì • DOM ìš”ì†Œ ì°¾ê¸°
- `screen.debug` â†’ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ì¤‘ UI ìš”ì†Œ ë””ë²„ê¹…ìš©
- `logRoles` â†’ ë Œë”ë§ ê²°ê³¼ë¡œë¶€í„° ì—­í• ê³¼ ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„ í™•ì¸

- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬: ì–´ë–¤ ì…ë ¥ì´ ë°œìƒí–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ â†’ _ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ~í•œë‹¤_
- ì´ë²¤íŠ¸ í˜¸ì¶œì€ í•¨ìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì™€ ë™ì¼í•˜ê²Œ **ëª© í•¨ìˆ˜**ë¡œ ê²€ì¦ â†’ `mockFn`
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¡œ ëª© í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ê³  ì´ë¥¼ fireEventë¡œ ê²€ì¦

```tsx
const user = userEvent.setup()

test('ì´ë¦„ì„ í‘œì‹œí•œë‹¤', () => {
  render(<Form name="taro" />)
  screen.debug(screen.getByText('taro')) // <p>taro</p>
  expect(screen.getByText('taro')).toBeInTheDocument()
})

test('ë²„íŠ¼ì„ í‘œì‹œí•œë‹¤', () => {
  render(<Form name="taro" />)
  screen.debug(screen.getByRole('button')) // <button>ìˆ˜ì •</button>
  expect(screen.getByRole('button')).toBeInTheDocument()
})

test('headingì„ í‘œì‹œí•œë‹¤', () => {
  render(<Form name="taro" />)
  screen.debug(screen.getByRole('heading')) // <h2>ê³„ì • ì •ë³´</h2>
  expect(screen.getByRole('heading')).toHaveTextContent('ê³„ì • ì •ë³´')
})

test('ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ëœë‹¤', async () => {
  const mockFn = jest.fn()
  render(<Form name="taro" onSubmit={mockFn} />)

  const button = screen.getByRole('button')
  await user.click(button)

  expect(mockFn).toHaveBeenCalled()
})
```

## ì•„ì´í…œ ëª©ë¡ UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

- Propsë¡œ ì·¨ë“í•œ ëª©ë¡ì„ í‘œì‹œí•˜ëŠ” í…ŒìŠ¤íŠ¸
- í•œ ë²ˆì— ì—¬ëŸ¬ DOM ìš”ì†Œë¥¼ ì·¨ë“í•˜ëŠ” ë°©ë²•
- â€˜ì¡´ì¬í•˜ì§€ ì•ŠìŒâ€™ì„ í™•ì¸í•˜ëŠ” ë§¤ì²˜ë¡œ ìš”ì†Œê°€ í™”ë©´ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ë²•

### í…ŒìŠ¤íŠ¸í•  UI ì»´í¬ë„ŒíŠ¸ - `ArticleList`

```tsx
type Props = {
  items: ItemProps[]
}

export const ArticleList = ({ items }: Props) => {
  return (
    <div>
      <h2>ê¸°ì‚¬ ëª©ë¡</h2>
      {items.length ? (
        <ul>
          {items.map(item => (
            <ArticleListItem {...item} key={item.id} />
          ))}
        </ul>
      ) : (
        <p>ê²Œì¬ëœ ê¸°ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤</p>
      )}
    </div>
  )
}
```

- í‘œì‹œí•  ê¸°ì‚¬ê°€ ìˆìœ¼ë©´ ê¸°ì‚¬ ëª©ë¡ì„ í™”ë©´ì— í‘œì‹œí•˜ëŠ”ì§€?
- í‘œì‹œí•  ê¸°ì‚¬ê°€ ì—†ìœ¼ë©´ ê¸°ì‚¬ ëª©ë¡ ëŒ€ì‹  `ê²Œì¬ëœ ê¸°ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤` í…ìŠ¤íŠ¸ë¥¼ í™”ë©´ì— í‘œì‹œí•˜ëŠ”ì§€?

### ëª©ë¡ì— í‘œì‹œëœ ë‚´ìš© í…ŒìŠ¤íŠ¸

- `getAllByRole` â†’ ì§€ì •í•œ ì—­í• ê³¼ ì¼ì¹˜í•˜ëŠ” ëª¨ë“  ìš”ì†Œë¥¼ ë°°ì—´ë¡œ ì·¨ë“
- `toHaveLength` â†’ ë°°ì—´ ê¸¸ì´ë¥¼ ê²€ì¦
- `within` í•¨ìˆ˜ë¡œ í…ŒìŠ¤íŠ¸ ë²”ìœ„ ì¢íˆê¸°

```tsx
import { render, screen, within } from '@testing-library/react'
import { ArticleList } from './ArticleList'
import { items } from './fixture'

test('itemsì˜ ìˆ˜ë§Œí¼ ëª©ë¡ì„ í‘œì‹œí•œë‹¤', () => {
  render(<ArticleList items={items} />)

  const list = screen.getByRole('list')

  expect(list).toBeInTheDocument() // (1) ulì´ ì˜ ë Œë”ë§ ëëŠ”ì§€ ë¨¼ì € ê²€ì¦
  expect(within(list).getAllByRole('listitem')).toHaveLength(3) // (2) withinìœ¼ë¡œ ë²”ìœ„ë¥¼ í•œì •í•œ í›„ ëª©ë¡ì— í‘œì‹œëœ ì•„ì´í…œ ê°œìˆ˜ ê²€ì¦
})
```

### ëª©ë¡ì— í‘œì‹œí•  ë‚´ìš©ì´ ì—†ëŠ” ê²½ìš° í…ŒìŠ¤íŠ¸

- `queryByRole` â†’ í•´ë‹¹ ìš”ì†Œê°€ ì—†ëŠ” ê²½ìš°ë¥¼ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©
  - `not.toBeInTheDocument` ë§¤ì²˜ë¡œ í™”ë©´ì— ì—†ëŠ” ê²½ìš°ë¥¼ ê²€ì¦ ê°€ëŠ¥
  - ì·¨ë“í•  ìš”ì†Œê°€ ì—†ìœ¼ë©´ `null`ì„ ë°˜í™˜í•˜ë¯€ë¡œ `toBeNull` ë§¤ì²˜ë¡œë„ ê²€ì¦ ê°€ëŠ¥

```tsx
test('ëª©ë¡ì— í‘œì‹œí•  ë°ì´í„°ê°€ ì—†ìœ¼ë©´ "ê²Œì¬ëœ ê¸°ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤"ë¥¼ í‘œì‹œí•œë‹¤', () => {
  render(<ArticleList items={[]} />)
  const list = screen.queryByRole('list')

  expect(list).not.toBeInTheDocument() // (1) ulì´ í™”ë©´ì— ì—†ëŠ”ì§€ ë¨¼ì € ê²€ì¦
  expect(screen.getByText('ê²Œì¬ëœ ê¸°ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤')).toBeInTheDocument() // (2) 'ê²Œì¬ëœ ê¸°ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤'ê°€ í‘œì‹œë˜ëŠ”ì§€ ê²€ì¦
})
```

> [!NOTE]
>
> #### ğŸ¯Â [ì¿¼ë¦¬ ìœ í˜• ë” ì•Œì•„ë³´ê¸°](https://testing-library.com/docs/queries/about/#types-of-queries)
>
> | ì¿¼ë¦¬ ìœ í˜•       | 0 Matches   | 1 Match              | >1 Matches | ìë™ ì¬ì‹œë„ (async/await) |
> | --------------- | ----------- | -------------------- | ---------- | ------------------------- |
> | **ë‹¨ì¼ ìš”ì†Œ**   |             |                      |            |                           |
> | `getBy...`      | ì—ëŸ¬ ë°œìƒ   | ìš”ì†Œ ë°˜í™˜            | ì—ëŸ¬ ë°œìƒ  | X                         |
> | `queryBy...`    | `null` ë°˜í™˜ | ìš”ì†Œ ë°˜í™˜            | ì—ëŸ¬ ë°œìƒ  | X                         |
> | `findBy...`     | ì—ëŸ¬ ë°œìƒ   | ìš”ì†Œ ë°˜í™˜            | ì—ëŸ¬ ë°œìƒ  | O                         |
> | **ë³µìˆ˜ ìš”ì†Œ**   |             |                      |            |                           |
> | `getAllBy...`   | ì—ëŸ¬ ë°œìƒ   | ë°°ì—´ ë°˜í™˜ (1ê°œ ìš”ì†Œ) | ë°°ì—´ ë°˜í™˜  | X                         |
> | `queryAllBy...` | `[]` ë°˜í™˜   | ë°°ì—´ ë°˜í™˜ (1ê°œ ìš”ì†Œ) | ë°°ì—´ ë°˜í™˜  | X                         |
> | `findAllBy...`  | ì—ëŸ¬ ë°œìƒ   | ë°°ì—´ ë°˜í™˜ (1ê°œ ìš”ì†Œ) | ë°°ì—´ ë°˜í™˜  | O                         |
>
> #### ğŸ¤” ì–´ë–¤ ìƒí™©ì—ì„œ ì–´ë–¤ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ì„ê¹Œ?
>
> | ì‚¬ìš© ìƒí™©                                     | ì¿¼ë¦¬ ìœ í˜•       | ì´ìœ                                     |
> | --------------------------------------------- | --------------- | --------------------------------------- |
> | ìš”ì†Œê°€ **ë¬´ì¡°ê±´ ì¡´ì¬**í•´ì•¼ í•¨                 | `getBy...`      | ìš”ì†Œê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ ë°œìƒ, ì¦‰ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ |
> | ìš”ì†Œê°€ **ì—†ì„ ìˆ˜ë„ ìˆìŒ**                     | `queryBy...`    | ìš”ì†Œê°€ ì—†ìœ¼ë©´ `null` ë°˜í™˜ (ì—ëŸ¬ ë°œìƒ X) |
> | ìš”ì†Œê°€ **ë¹„ë™ê¸°ì ìœ¼ë¡œ ë‚˜íƒ€ë‚¨**                | `findBy...`     | `await` í•„ìš”, ìš”ì†Œê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ ë°œìƒ   |
> | ìš”ì†Œê°€ **ì—¬ëŸ¬ ê°œì¼ ìˆ˜ë„ ìˆìŒ**                | `getAllBy...`   | í•­ìƒ ë°°ì—´ ë°˜í™˜, ìš”ì†Œê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ ë°œìƒ |
> | ìš”ì†Œê°€ **ì—¬ëŸ¬ ê°œì¼ ìˆ˜ë„ ìˆê³  ì—†ì„ ìˆ˜ë„ ìˆìŒ** | `queryAllBy...` | í•­ìƒ ë°°ì—´ ë°˜í™˜, ìš”ì†Œê°€ ì—†ìœ¼ë©´ `[]`      |
> | ìš”ì†Œê°€ **ë¹„ë™ê¸°ì ìœ¼ë¡œ ì—¬ëŸ¬ ê°œ ë‚˜íƒ€ë‚¨**        | `findAllBy...`  | `await` í•„ìš”, ìš”ì†Œê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ ë°œìƒ   |

### í…ŒìŠ¤íŠ¸í•  UI ì»´í¬ë„ŒíŠ¸ - `ArticleListItem`

```tsx
export type ItemProps = {
  id: string
  title: string
  body: string
}

export const ArticleListItem = ({ id, title, body }: ItemProps) => {
  return (
    <li>
      <h3>{title}</h3>
      <p>{body}</p>
      <a href={`/articles/${id}`}>ë” ì•Œì•„ë³´ê¸°</a>
    </li>
  )
}
```

- â€˜ë” ì•Œì•„ë³´ê¸°â€™ ë§í¬ì— ì—°ê²°ëœ urlì´ `id`ë¡œ ë§Œë“¤ì–´ì¡ŒëŠ”ì§€?

### ë§í¬ê°€ `id`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì˜ ë§Œë“¤ì–´ì¡ŒëŠ”ì§€ í…ŒìŠ¤íŠ¸

- `toHaveAttribute` â†’ ìš”ì†Œì˜ ì†ì„± ê²€ì¦

```tsx
test('ë§í¬ì— idë¡œ ë§Œë“  URLì„ í‘œì‹œí•œë‹¤', () => {
  render(<ArticleListItem {...item} />)
  const link = screen.getByRole('link', { name: 'ë” ì•Œì•„ë³´ê¸°' })
  expect(link).toHaveAttribute('href', '/articles/howto-testing-with-typescript')
})
```

> [!NOTE]
>
> #### ğŸ¯Â [ì¿¼ë¦¬ì˜ ìš°ì„ ìˆœìœ„](https://testing-library.com/docs/queries/about/#priority)
>
> - ëª¨ë‘ê°€ ì ‘ê·¼ ê°€ëŠ¥í•œ ì¿¼ë¦¬
>   - ì‹œê°/ë§ˆìš°ìŠ¤ ì‚¬ìš©ìì™€ ìŠ¤í¬ë¦° ë¦¬ë” ê°™ì€ ë³´ì¡° ê¸°ê¸°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ìê°€ ë™ì¼í•œ ì‚¬ìš©ì ê²½í—˜ì„ í•  ìˆ˜ ìˆë„ë¡ í•¨
>   - ì‹ ì²´ì , ì •ì‹ ì  íŠ¹ì„±ì— ë”°ë¥¸ ì°¨ì´ ì—†ì´ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì¿¼ë¦¬
>
> | `getByRole`            | ìš”ì†Œì˜ `role`ì„ ê¸°ë°˜ìœ¼ë¡œ ê²€ìƒ‰                |
> | ---------------------- | -------------------------------------------- |
> | `getByLabelText`       | `<label>`ê³¼ ì—°ê²°ëœ input ìš”ì†Œë¥¼ ì°¾ì„ ë•Œ ì‚¬ìš© |
> | `getByPlaceholderText` | `placeholder` ì†ì„±ì„ ê¸°ë°˜ìœ¼ë¡œ ìš”ì†Œ ê²€ìƒ‰      |
> | `getByText`            | ìš”ì†Œì— í¬í•¨ëœ í…ìŠ¤íŠ¸ ì½˜í…ì¸ ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê²€ìƒ‰  |
> | `getByDisplayValue`    | input ìš”ì†Œì˜ í˜„ì¬ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰         |
>
> - ì‹œë§¨í‹± ì¿¼ë¦¬
>   - ì›¹ í‘œì¤€ì— ê¸°ë°˜í•œ ì†ì„±ì„ ì‚¬ìš©í•˜ëŠ” ì¿¼ë¦¬
>
> | `getByAltText` | `alt` ì†ì„±ì„ ê°€ì§„ ìš”ì†Œë¥¼ ì°¾ì„ ë•Œ ì‚¬ìš© |
> | -------------- | ------------------------------------- |
> | `getByTitle`   | `title` ì†ì„±ì„ ê¸°ë°˜ìœ¼ë¡œ ìš”ì†Œ ê²€ìƒ‰     |
>
> - í…ŒìŠ¤íŠ¸ ID - í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ í• ë‹¹ëœ ì‹ë³„ì - ë¬¸ì ì½˜í…ì¸ ë¥¼ í™œìš©í•œ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê±°ë‚˜ ì˜ë„ì ìœ¼ë¡œ ì˜ë¯¸ ë¶€ì—¬ë¥¼ í”¼í•˜ê³  ì‹¶ì„ ë•Œë§Œ ì‚¬ìš© ê¶Œì¥
>
> | `getByTestId` | `data-testId` ì†ì„±ì„ ê¸°ë°˜ìœ¼ë¡œ ìš”ì†Œ ê²€ìƒ‰ |
> | ------------- | --------------------------------------- |

## ì¸í„°ë™í‹°ë¸Œ UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

### ì´ìš© ì•½ê´€ ë™ì˜ ì²´í¬ë°•ìŠ¤ í…ŒìŠ¤íŠ¸

```tsx
type Props = {
  onChange?: React.ChangeEventHandler<HTMLInputElement>
}

export const Agreement = ({ onChange }: Props) => {
  return (
    <fieldset>
      <legend>ì´ìš© ì•½ê´€ ë™ì˜</legend>
      <label>
        <input type="checkbox" onChange={onChange} />
        ì„œë¹„ìŠ¤&nbsp;<a href="/terms">ì´ìš© ì•½ê´€</a>ì„ í™•ì¸í–ˆìœ¼ë©° ì´ì— ë™ì˜í•©ë‹ˆë‹¤
      </label>
    </fieldset>
  )
}
```

- `getByRole(â€™groupâ€™, { name: â€˜ì´ìš© ì•½ê´€ ë™ì˜â€™ })` â†’ [ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„](https://developer.mozilla.org/ko/docs/Glossary/Accessible_name) ì¸ìš©í•˜ê¸°
- `toBeChecked` â†’ ì²´í¬ ë°•ìŠ¤ì˜ ì²´í¬ ì—¬ë¶€ ê²€ì¦

```tsx
test('fieldsetì˜ ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„ì„ legendì—ì„œ ì¸ìš©í•©ë‹ˆë‹¤', () => {
  render(<Agreement />)
  const fieldset = screen.getByRole('group', { name: 'ì´ìš© ì•½ê´€ ë™ì˜' })
  expect(fieldset).toBeInTheDocument()
})

test('ì²´í¬ ë°•ìŠ¤ê°€ ì²´í¬ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤', () => {
  render(<Agreement />)
  const checkbox = screen.getByRole('checkbox')
  expect(checkbox).not.toBeChecked()
})
```

> [!NOTE]
>
> #### ğŸ¯Â ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„(Accessible name)
>
> - ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„ì€ **ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„ ê³„ì‚°**ì„ ê¸°ë°˜ìœ¼ë¡œ ê²°ì •ë¨
> - ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„ ê³„ì‚°ì€ ë‹¨ê³„ë³„ë¡œ ì§„í–‰
>   - _ê° ë‹¨ê³„ë¥¼ ìˆœì„œëŒ€ë¡œ í™•ì¸ í›„, í•´ë‹¹ ê°’ì´ ìˆì„ ê²½ìš° ì¦‰ì‹œ ì ìš©_
>   - (1) `aria-labelledby` ì†ì„± í™•ì¸
>   - (2) `aria-label` ì†ì„± í™•ì¸
>   - (3) HTML ìš”ì†Œì— ë”°ë¥¸ ì†ì„± ê°’ ì‚¬ìš© (`value`, `alt`, `legend`, `label` ë“±)
>   - (4) ìš”ì†Œ ë‚´ë¶€ í…ìŠ¤íŠ¸ ì½˜í…ì¸  ì‚¬ìš©
>   - (5) ê¸°íƒ€ ì†ì„± ê°’ ì‚¬ìš© (fallback - `title`, `placeholder` ë“±)
> - [Accessible name - mdn docs](https://developer.mozilla.org/ko/docs/Glossary/Accessible_name)
> - [Accessible name calculation - W3C docs](https://www.w3.org/WAI/ARIA/apg/practices/names-and-descriptions/#name_calculation)

### ê³„ì • ì •ë³´ ì…ë ¥ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

```tsx
export const InputAccount = () => {
  return (
    <fieldset>
      <legend>ê³„ì •ì •ë³´ ì…ë ¥</legend>
      <div>
        <label>
          ë©”ì¼ì£¼ì†Œ
          <input type="text" placeholder="example@test.com" />
        </label>
      </div>
      <div>
        <label>
          ë¹„ë°€ë²ˆí˜¸
          <input type="password" placeholder="8ì ì´ìƒ" />
        </label>
      </div>
    </fieldset>
  )
}
```

- `user.type` â†’ `@testing-library/user-event`ë¡œ ì…ë ¥ ì¬í˜„
- `role`ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ìš”ì†Œì˜ ê²½ìš°
  - `getByPlaceholderText` ì‚¬ìš©í•˜ê¸°
  - `aria-labelledby` ì§€ì •í•˜ê¸° â†’ ì ‘ê·¼ ê°€ëŠ¥í•œ ê³„ì‚° ìµœìƒë‹¨ ìš°ì„ ìˆœìœ„

```tsx
// í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‘ì„± ì´ˆê¸°ì— ì„¤ì •
const user = userEvent.setup()

test('ë©”ì¼ì£¼ì†Œ ì…ë ¥ë€', async () => {
  render(<InputAccount />)

  const textbox = screen.getByRole('textbox', { name: 'ë©”ì¼ì£¼ì†Œ' })
  const value = 'taro.tanaka@example.com'
  await user.type(textbox, value) // user-eventë¡œ ì…ë ¥ ì¬í˜„ ë° ê²€ì¦í•  ê°’ ì…ë ¥

  expect(screen.getByDisplayValue(value)).toBeInTheDocument()
})

test('ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ë€', async () => {
  render(<InputAccount />)

  expect(() => screen.getByPlaceholderText('8ì ì´ìƒ')).not.toThrow()
  expect(() => screen.getByRole('textbox', { name: 'ë¹„ë°€ë²ˆí˜¸' })).toThrow()
})

test('ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ë€', async () => {
  render(<InputAccount />)

  const password = screen.getByPlaceholderText('8ì ì´ìƒ')
  const value = 'abcd1234'
  await user.type(password, value)

  expect(screen.getByDisplayValue(value)).toBeInTheDocument()
})
```

### ì‹ ê·œ íšŒì›ê°€ì… í¼ í…ŒìŠ¤íŠ¸

```tsx
export const Form = () => {
  const [checked, setChecked] = useState(false)
  const headingId = useId()
  return (
    <form aria-labelledby={headingId}>
      <h2 id={headingId}>ì‹ ê·œ ê³„ì • ë“±ë¡</h2>
      <InputAccount />
      <Agreement
        onChange={event => {
          setChecked(event.currentTarget.checked)
        }}
      />
      <div>
        <button disabled={!checked}>íšŒì›ê°€ì…</button>
      </div>
    </form>
  )
}
```

- íšŒì›ê°€ì… ë²„íŠ¼ í™œì„±í™” ì—¬ë¶€ í…ŒìŠ¤íŠ¸
  - `userEvent.setup`ìœ¼ë¡œ ë§Œë“  `user`ë¡œ í´ë¦­ ì¬í˜„
  - `toBeDisabled` â†’ `disabled` ì†ì„± í™œì„±í™” ì—¬ë¶€

```tsx
test('íšŒì›ê°€ì… ë²„íŠ¼ì€ ë¹„í™œì„±í™” ìƒíƒœë‹¤', () => {
  render(<Form />)
  expect(screen.getByRole('button', { name: 'íšŒì›ê°€ì…' })).toBeDisabled()
})

test('ì´ìš© ì•½ê´€ì— ë™ì˜í•˜ëŠ” ì²´í¬ ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ë©´ íšŒì›ê°€ì… ë²„íŠ¼ì€ í™œì„±í™”ëœë‹¤', async () => {
  render(<Form />)
  await user.click(screen.getByRole('checkbox'))
  expect(screen.getByRole('button', { name: 'íšŒì›ê°€ì…' })).toBeEnabled()
})
```

- formì˜ `role`ë¡œ ìš”ì†Œ ì·¨ë“í•˜ê¸° â†’ ë¦¬ì•¡íŠ¸ì˜ `useId` í›… ì‚¬ìš©

```tsx
test('formì˜ ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„ì€ headingì—ì„œ ì¸ìš©í•©ë‹ˆë‹¤', () => {
  render(<Form />)
  expect(screen.getByRole('form', { name: 'ì‹ ê·œ ê³„ì • ë“±ë¡' })).toBeInTheDocument()
})
```

## ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ í™œìš©í•œ í…ŒìŠ¤íŠ¸

```
ì´ì „ ë°°ì†¡ì§€ - ì—†ìŒ - ì—°ë½ì²˜ ë° ë°°ì†¡ì§€ ì…ë ¥
  ã„´ ìˆìŒ - ì—°ë½ì²˜ ì…ë ¥ ë° ì´ì „ ë°°ì†¡ì§€ ì„ íƒ
    ã„´ ì—°ë½ì²˜ ë° ìƒˆë¡œìš´ ë°°ì†¡ì§€ ì…ë ¥
```

- í…ŒìŠ¤íŠ¸í•´ì•¼ í•  í™”ë©´ ë¶„ê¸°ë§ˆë‹¤ ì—°ë½ì²˜ ë° ë°°ì†¡ì§€ ì…ë ¥ì´ ë°˜ë³µë¨ â†’ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¡œ ë§Œë“¤ê¸°

### í¼ ì…ë ¥ì„ í•¨ìˆ˜í™”í•˜ê¸°(ì¸í„°ë™ì…˜ í•¨ìˆ˜)

```tsx
// ì—°ë½ì²˜ ì…ë ¥ ì¸í„°ë™ì…˜ í•¨ìˆ˜
async function inputContactNumber(
  inputValues = {
    name: 'ë°°ì–¸ìˆ˜',
    phoneNumber: '000-0000-0000',
  },
) {
  await user.type(screen.getByRole('textbox', { name: 'ì „í™”ë²ˆí˜¸' }), inputValues.phoneNumber)
  await user.type(screen.getByRole('textbox', { name: 'ì´ë¦„' }), inputValues.name)
  return inputValues
}

// ë°°ì†¡ì§€ ì…ë ¥ ì¸í„°ë™ì…˜ í•¨ìˆ˜
async function inputDeliveryAddress(
  inputValues = {
    postalCode: '16397',
    prefectures: 'ê²½ê¸°ë„',
    municipalities: 'ìˆ˜ì›ì‹œ ê¶Œì„ êµ¬',
    streetNumber: 'ë§¤ê³¡ë¡œ 67',
  },
) {
  await user.type(screen.getByRole('textbox', { name: 'ìš°í¸ë²ˆí˜¸' }), inputValues.postalCode)
  await user.type(screen.getByRole('textbox', { name: 'ì‹œ/ë„' }), inputValues.prefectures)
  await user.type(screen.getByRole('textbox', { name: 'ì‹œ/êµ°/êµ¬' }), inputValues.municipalities)
  await user.type(screen.getByRole('textbox', { name: 'ë„ë¡œëª…' }), inputValues.streetNumber)
  return inputValues
}

// ë²„íŠ¼ í´ë¦­ ì¸í„°ë™ì…˜ í•¨ìˆ˜
async function clickSubmit() {
  await user.click(screen.getByRole('button', { name: 'ì£¼ë¬¸ë‚´ìš© í™•ì¸' }))
}
```

- Form ì´ë²¤íŠ¸ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•œ ëª© í•¨ìˆ˜ â†’ ìŠ¤íŒŒì´ì™€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì¡°í•©í•´ ì‘ì„±

```tsx
function mockHandleSubmit() {
  const mockFn = jest.fn()
  const onSubmit = (event: React.FormEvent<HTMLFormElement>) => {
    event.preventDefault()
    const formData = new FormData(event.currentTarget)
    const data: { [k: string]: unknown } = {}
    formData.forEach((value, key) => (data[key] = value))
    mockFn(data)
  }
  return [mockFn, onSubmit] as const
}
```

### ì´ì „ ë°°ì†¡ì§€ê°€ ì—†ëŠ” ê²½ìš°ì˜ í…ŒìŠ¤íŠ¸

```tsx
describe('ì´ì „ ë°°ì†¡ì§€ê°€ ì—†ëŠ” ê²½ìš°', () => {
  test('ë°°ì†¡ì§€ ì…ë ¥ë€ì´ ì¡´ì¬í•œë‹¤', () => {
    render(<Form />)
    expect(screen.getByRole('group', { name: 'ì—°ë½ì²˜' })).toBeInTheDocument()
    expect(screen.getByRole('group', { name: 'ë°°ì†¡ì§€' })).toBeInTheDocument()
  })

  test('í¼ì„ ì œì¶œí•˜ë©´ ì…ë ¥ ë‚´ìš©ì„ ì „ë‹¬ë°›ëŠ”ë‹¤', async () => {
    const [mockFn, onSubmit] = mockHandleSubmit()
    render(<Form onSubmit={onSubmit} />) // ëª© í•¨ìˆ˜ ì „ë‹¬
    const contactNumber = await inputContactNumber() // ì¸í„°ë™ì…˜ í•¨ìˆ˜ë¡œ ì—°ë½ì²˜ ì…ë ¥ ì¬í˜„
    const deliveryAddress = await inputDeliveryAddress() // ì¸í„°ë™ì…˜ í•¨ìˆ˜ë¡œ ë°°ì†¡ì§€ ì…ë ¥ ì¬í˜„
    await clickSubmit() // ìœ í‹¸ í•¨ìˆ˜ë¡œ í¼ ì œì¶œ ì¬í˜„
    expect(mockFn).toHaveBeenCalledWith(
      expect.objectContaining({ ...contactNumber, ...deliveryAddress }), // ë¶€ë¶„ì ìœ¼ë¡œ ëŒ€ìƒ ê²€ì¦
    )
  })

  test('Snapshot', () => {
    const { container } = render(<Form />)
    expect(container).toMatchSnapshot()
  })
})
```

### ì´ì „ ë°°ì†¡ì§€ê°€ ìˆëŠ” ê²½ìš°ì˜ í…ŒìŠ¤íŠ¸

```tsx
describe('ì´ì „ ë°°ì†¡ì§€ê°€ ìˆëŠ” ê²½ìš°', () => {
  test('ì§ˆë¬¸ì— ëŒ€ë‹µí•  ë•Œê¹Œì§€ ë°°ì†¡ì§€ë¥¼ ì„ íƒí•  ìˆ˜ ì—†ë‹¤', () => {
    render(<Form deliveryAddresses={deliveryAddresses} />) // fixture ì „ë‹¬
    expect(
      screen.getByRole('group', { name: 'ìƒˆë¡œìš´ ë°°ì†¡ì§€ë¥¼ ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?' }),
    ).toBeInTheDocument()
    expect(screen.getByRole('group', { name: 'ì´ì „ ë°°ì†¡ì§€' })).toBeDisabled()
  })

  test("'ì•„ë‹ˆì˜¤'ë¥¼ ì„ íƒí•˜ê³  ì œì¶œí•˜ë©´ ì…ë ¥ ë‚´ìš©ì„ ì „ë‹¬ë°›ëŠ”ë‹¤", async () => {
    const [mockFn, onSubmit] = mockHandleSubmit()
    render(<Form deliveryAddresses={deliveryAddresses} onSubmit={onSubmit} />) // ëª© í•¨ìˆ˜ ì „ë‹¬
    await user.click(screen.getByLabelText('ì•„ë‹ˆì˜¤'))
    expect(screen.getByRole('group', { name: 'ì´ì „ ë°°ì†¡ì§€' })).toBeInTheDocument()
    const inputValues = await inputContactNumber() // ì¸í„°ë™ì…˜ í•¨ìˆ˜ë¡œ ì—°ë½ì²˜ ì…ë ¥ ì¬í˜„
    await clickSubmit()
    expect(mockFn).toHaveBeenCalledWith(expect.objectContaining(inputValues))
  })

  test("'ë„¤'ë¥¼ ì„ íƒí•˜ê³  ì œì¶œí•˜ë©´ ì…ë ¥ ë‚´ìš©ì„ ì „ë‹¬ë°›ëŠ”ë‹¤", async () => {
    const [mockFn, onSubmit] = mockHandleSubmit()
    render(<Form deliveryAddresses={deliveryAddresses} onSubmit={onSubmit} />)
    await user.click(screen.getByLabelText('ë„¤'))
    expect(screen.getByRole('group', { name: 'ìƒˆë¡œìš´ ë°°ì†¡ì§€' })).toBeInTheDocument()
    const contactNumber = await inputContactNumber()
    const deliveryAddress = await inputDeliveryAddress() // ì¸í„°ë™ì…˜ í•¨ìˆ˜ë¡œ (ìƒˆë¡œìš´) ë°°ì†¡ì§€ ì…ë ¥ ì¬í˜„
    await clickSubmit()
    expect(mockFn).toHaveBeenCalledWith(
      expect.objectContaining({ ...contactNumber, ...deliveryAddress }),
    )
  })

  test('Snapshot', () => {
    const { container } = render(<Form deliveryAddresses={deliveryAddresses} />)
    expect(container).toMatchSnapshot()
  })
})
```

## ë¹„ë™ê¸° ì²˜ë¦¬ê°€ í¬í•¨ëœ UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

```tsx
export const RegisterAddress = () => {
  const [postResult, setPostResult] = useState('')
  return (
    <div>
      <Form
        onSubmit={handleSubmit(values => {
          try {
            checkPhoneNumber(values.phoneNumber)
            postMyAddress(values)
              .then(() => {
                setPostResult('ë“±ë¡ëìŠµë‹ˆë‹¤')
              })
              .catch(() => {
                setPostResult('ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤')
              })
          } catch (err) {
            if (err instanceof ValidationError) {
              setPostResult('ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤')
              return
            }
            setPostResult('ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤')
          }
        })}
      />
      {postResult && <p>{postResult}</p>}
    </div>
  )
}
```

- `handleSubmit` â†’ formì— ì „ì†¡ëœ ê°’ì„ `values`ë¼ëŠ” ê°ì²´ë¡œ ë³€í™˜
- `checkPhoneNumber` â†’ ì „ì†¡ëœ ê°’ì— ìœ íš¨ì„± ê²€ì‚¬
- `postMyAddress` â†’ ì›¹ API í´ë¼ì´ì–¸íŠ¸ í˜¸ì¶œ

### ì›¹ API í´ë¼ì´ì–¸íŠ¸ì˜ ëª© í•¨ìˆ˜

- `postMyAddress` ëª© í•¨ìˆ˜ ë§Œë“¤ê¸°

```tsx
// postMyAddress ëª© í•¨ìˆ˜
export function mockPostMyAddress(status = 200) {
  if (status > 299) {
    return jest.spyOn(Fetchers, 'postMyAddress').mockRejectedValueOnce(httpError) // ì‹¤íŒ¨ ê²°ê³¼ ë°˜í™˜
  }
  return jest.spyOn(Fetchers, 'postMyAddress').mockResolvedValueOnce(postMyAddressMock) // ì„±ê³µ ê²°ê³¼ ë°˜í™˜
}
```

### ì…ë ¥ëœ ê°’ì„ ì „ì†¡í•˜ëŠ” ì¸í„°ë™ì…˜ í•¨ìˆ˜

```tsx
// ì˜¬ë°”ë¥¸ ì…ë ¥ê°’ ì¸í„°ë™ì…˜ í•¨ìˆ˜
async function fillValuesAndSubmit() {
  const contactNumber = await inputContactNumber()
  const deliveryAddress = await inputDeliveryAddress()
  const submitValues = { ...contactNumber, ...deliveryAddress }
  await clickSubmit()
  return submitValues
}

// ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì…ë ¥ê°’ ì¸í„°ë™ì…˜ í•¨ìˆ˜
async function fillInvalidValuesAndSubmit() {
  const contactNumber = await inputContactNumber({
    name: 'ë°°ì–¸ìˆ˜',
    phoneNumber: 'abc-defg-hijkl',
  })
  const deliveryAddress = await inputDeliveryAddress()
  const submitValues = { ...contactNumber, ...deliveryAddress }
  await clickSubmit()
  return submitValues
}
```

### ì‘ë‹µ ì„±ê³µ í…ŒìŠ¤íŠ¸

```tsx
test("ì„±ê³µí•˜ë©´ 'ë“±ë¡ëìŠµë‹ˆë‹¤'ê°€ í‘œì‹œëœë‹¤", async () => {
  const mockFn = mockPostMyAddress() // ê¸°ë³¸ê°’ 200
  render(<RegisterAddress />)
  const submitValues = await fillValuesAndSubmit()
  expect(mockFn).toHaveBeenCalledWith(expect.objectContaining(submitValues))
  expect(screen.getByText('ë“±ë¡ëìŠµë‹ˆë‹¤')).toBeInTheDocument()
})
```

### ì‘ë‹µ ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸

```tsx
test("ì‹¤íŒ¨í•˜ë©´ 'ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤'ê°€ í‘œì‹œëœë‹¤", async () => {
  const mockFn = mockPostMyAddress(500)
  render(<RegisterAddress />)
  const submitValues = await fillValuesAndSubmit()
  expect(mockFn).toHaveBeenCalledWith(expect.objectContaining(submitValues))
  expect(screen.getByText('ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤')).toBeInTheDocument()
})
```

### ìœ íš¨ì„± ê²€ì‚¬ ì˜¤ë¥˜ í…ŒìŠ¤íŠ¸

- `fillInvalidValuesAndSubmit` ì¸í„°ë™ì…˜ í•¨ìˆ˜ë¡œ ìœ íš¨ì„± ê²€ì‚¬ì— ì‹¤íŒ¨í•˜ëŠ” ì…ë ¥ê°’ ì „ë‹¬

```tsx
test("ìœ íš¨ì„± ê²€ì‚¬ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ 'ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤'ê°€ í‘œì‹œëœë‹¤", async () => {
  render(<RegisterAddress />)
  await fillInvalidValuesAndSubmit()
  expect(screen.getByText('ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê°’ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤')).toBeInTheDocument()
})
```

### ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ í…ŒìŠ¤íŠ¸

- `mockFn` ì—†ì´ í…ŒìŠ¤íŠ¸ â†’ ì›¹ API ìš”ì²­ ì²˜ë¦¬ ë¶ˆê°€ â†’ `ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬` ë°œìƒ

```tsx
test("ì›ì¸ì´ ëª…í™•í•˜ì§€ ì•Šì€ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ 'ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤'ê°€ í‘œì‹œëœë‹¤", async () => {
  render(<RegisterAddress />)
  await fillValuesAndSubmit()
  expect(screen.getByText('ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤')).toBeInTheDocument()
})
```

## UI ì»´í¬ë„ŒíŠ¸ ìŠ¤ëƒ…ìˆ í…ŒìŠ¤íŠ¸

### ìŠ¤ëƒ…ìˆ ê¸°ë¡í•˜ê¸°

- UI ì»´í¬ë„ŒíŠ¸ì˜ ìŠ¤ëƒ…ìˆ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ HTML ë¬¸ìì—´ë¡œ í•´ë‹¹ ì‹œì ì˜ ë Œë”ë§ ê²°ê³¼ë¥¼ ì™¸ë¶€ íŒŒì¼ì— ì €ì¥
- `toMatchSnapshot`ì„ ì‚¬ìš©í•˜ëŠ” ë‹¨ì–¸ë¬¸ìœ¼ë¡œ ìŠ¤ëƒ…ìˆ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```tsx
test("Snapshot: ê³„ì •ëª…ì¸ 'taro'ê°€ í‘œì‹œëœë‹¤", () => {
  const { container } = render(<Form name="taro" />)
  expect(container).toMatchSnapshot()
})
```

- í…ŒìŠ¤íŠ¸ íŒŒì¼ê³¼ ê°™ì€ ê²½ë¡œì— `__snapshots__` í´ë”ê°€ ìƒì„±ë˜ê³  `.snap` í˜•ì‹ìœ¼ë¡œ ìŠ¤ëƒ…ìƒ· íŒŒì¼ì´ ì €ì¥ë¨

### íšŒê·€ í…ŒìŠ¤íŠ¸ ë°œìƒì‹œí‚¤ê¸°

- ìŠ¤ëƒ…ìˆ í…ŒìŠ¤íŠ¸ëŠ” ì´ë¯¸ ì»¤ë°‹ëœ `.snap` íŒŒì¼ê³¼ í˜„ì‹œì ì˜ ìŠ¤ëƒ…ìˆ íŒŒì¼ì„ ë¹„êµí•˜ì—¬ ì°¨ì´ì ì´ ë°œê²¬ë˜ë©´ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ê²Œ ë§Œë“œëŠ” í˜•íƒœ

![image.png](./image.png)

### ìŠ¤ëƒ…ìˆ ê°±ì‹ í•˜ê¸°

- ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì„±ê³µì‹œí‚¤ë ¤ë©´ ì»¤ë°‹ëœ ìŠ¤ëƒ…ìˆì„ ê°±ì‹ í•´ì•¼ í•¨ â†’ `--updateSnapshop` / `-u`

```bash
npx jest --updateSnapshop
```

> ìŠ¤ëƒ…ìˆ í…ŒìŠ¤íŠ¸ë¥¼ ê¸°ë¡í•œ í›„ì—ë„ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ë©´ UI ì»´í¬ë„ŒíŠ¸ì˜ HTML ì¶œë ¥ ê²°ê³¼ëŠ” ìˆ˜ì‹œë¡œ ë°”ë€ë‹¤. ë°œê²¬í•œ ë³€ê²½ ì‚¬í•­ì´ ì˜ë„í•œ ê²ƒì´ë¼ë©´ ê°±ì‹ ì„ í—ˆê°€í•œë‹¤ëŠ” ì˜ë¯¸ì—ì„œ ìƒˆë¡œ ì¶œë ¥ëœ ìŠ¤ëƒ…ìˆì„ ì»¤ë°‹í•˜ì.

## ì•”ë¬µì  `role`ê³¼ ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„

- `getByRole`ì€ HTML ìš”ì†Œì˜ `role`ì„ ì°¸ì¡°
- `role`ì€ WAI-ARIA ì‚¬ì–‘ì— í¬í•¨ëœ ë‚´ìš© ì¤‘ í•˜ë‚˜
  - WAI-ARIA â†’ ë§ˆí¬ì—…ë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•œ ì •ë³´ë¥¼ ë³´ê°•í•˜ê±°ë‚˜ ì˜ë„í•œ ëŒ€ë¡œ ì˜ë¯¸ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•œ ëª©ì 

### ì•”ë¬µì  ì—­í• 

- íƒœê·¸ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” `role`
- í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ `aria-query` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì•”ë¬µì  ì—­í• ì„ ì·¨ë“
  - `jsdom`ì€ ì ‘ê·¼ì„±ì— ê´€ì—¬í•˜ì§€ ì•ŠìŒ

> [!NOTE]
>
> #### ğŸ¯ `role` ì°¸ê³  ë§í¬...
>
> - [W3Cì—ì„œ ì œê³µí•˜ëŠ” HTML íƒœê·¸ë³„ ì—­í•  - W3C docs](https://www.w3.org/TR/html-aria/#dfn-no-corresponding-role)
> - [WAI-ARIA Roles - mdn docs](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles)

### ì¼ëŒ€ì¼ë¡œ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” `role`ê³¼ HTML ìš”ì†Œ

```tsx
<input type="checkbox" /> // checkbox
<input type="radio" /> // radio
<input type="button" /> // button
<input type="text" /> // textbox
<input type="number" /> // spinbutton
<input type="password" /> // ì—†ìŒ
<input type="search" /> // searchbox
<input type="range" /> // slider
```

### aria ì†ì„±ê°’ì„ í™œìš©í•´ ì¶”ì¶œí•˜ê¸°

```tsx
getByRole('heading', { level: 1 })
/*
(1) <h1>ì œëª©</h1>
(2) <div role="heading" aria-level="1">ì œëª©</div>
*/
```

### ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„ì„ í™œìš©í•´ ì¶”ì¶œí•˜ê¸°

- ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„: ìŠ¤í¬ë¦° ë¦¬ë”ê°€ ì¸ì‹í•œëŠ ë…¸ë“œ ëª…ì¹­
  - ë²„íŠ¼ì— â€˜ì „ì†¡â€™ì´ë¼ëŠ” ë¬¸ìê°€ ìˆìœ¼ë©´ â†’ ìŠ¤í¬ë¦° ë¦¬ë”ì—ì„œëŠ” `â€˜ì „ì†¡â€™ ë²„íŠ¼` ìœ¼ë¡œ ì½í˜

```tsx
getByRole('button', { name: 'ì „ì†¡' })
/*
 (1) <button>ì „ì†¡</button>
 (2) <button><img alt="ì „ì†¡" src="path/to/img.png" /></button>
*/
```

### ì—­í• ê³¼ ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„ í™•ì¸í•˜ê¸°

- `logRoles` â†’ ë Œë”ë§ ê²°ê³¼ë¡œë¶€í„° roleê³¼ ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¦„ í™•ì¸ ê°€ëŠ¥
