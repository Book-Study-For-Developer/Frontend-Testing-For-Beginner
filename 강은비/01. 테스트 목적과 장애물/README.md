# 테스트 목적과 장애물

## 테스트를 작성해야 하는 이유

1. 예상치 못한 버그를 조기에 발견해 서비스의 이미지를 지켜준다. 버그는 서비스의 이미지와 직결된다. (특히, 비즈니스 임팩트가 큰 핵심 기능)
2. 지속적인 리팩토링을 돕는다. 코드 수정 시 기존 기능이 깨지지 않는지 빠르게 확인할 수 있다.
3. 코드 품질 향상에 도움이 된다. 테스트를 함께 작성하면 지속적으로 구현 코드를 반추하게 된다.

   - 어떤 구현 코드의 테스트 작성이 어렵다는 것은 해당 코드가 너무 많은 역햘을 한다는 신호일 수 있다.
   - 웹 접근성을 높이는 데 기여한다. UI 컴포넌트 테스트 시 웹 접근성에서 유래한 API를 활용해 테스트 대상을 선택한다. 테스트 코드를 작성하면 자연스럽게 보조기기를 이용하는 사람에게도 콘텐츠가 인식될 수 있는지 확인할 수 있다.

4. 원활한 리뷰가 이루어진다. 테스트는 사양서 역할을 해 구현 코드의 작동 방식을 파악하고 실제 사양서대로 구현되었는지 확인할 수 있어 리뷰어의 부담이 줄어든다.
5. 테스트 자동화는 회귀 테스트를 줄이는 최적의 방법이다.

> **테스트 대상 선택 API가 웹 접근성에서 유래한 이유**
>
> 기존 XPath와 CSS 선택자의 문제점
>
> - XPath: DOM 트리 구조가 조금만 변해도 테스트가 쉽게 깨짐.
> - CSS 선택자: CSS Module, styled-components, Tailwind 등 클래스네임이 동적으로 생성되면 선택자 기반 테스트가 불안정함.
>
> 접근성 기반 선택자
>
> - ARIA 표준은 특정 프레임워크나 CSS, DOM 트리 구조 등에 의존하지 않기 때문에 안정적인 테스트 작성이 가능하다.
> - 스크린 리더 친화적인 코드는 UI 요소의 역할(role)과 이름(accessible name)이 명확하게 정의되어 있어, 테스트 도구도 이를 쉽게 인식하고 검사할 수 있다.
>
> 참고: https://tech.wonderwall.kr/articles/a11ydriventestautomation/

## 테스트 작성의 장벽

- 테스트 작성 시간 부족, 팀원들의 기술력 부족
- 단기적인 관점: 테스트 작성은 많은 시간을 소모한다.
- 장기적인 관점: 버그를 빠르게 발견할 수 있고, QA 과정에서 반복되는 버그 수정 작업이 줄어든다.
  | | 테스트 자동화 없는 경우 | 테스트 자동화 있는 경우 |
  | -- | -- | -- |
  | 개인 | 기능 개발 | 기능 개발 + 테스트 자동화 |
  | 팀 | 기능 개발 + QA 반복 작업 | 기능 개발 + 테스트 자동화 |
  | 팀 (장기) |기능 개발 + QA 반복 작업 + 회귀 테스트 | 기능 개발 + 테스트 자동화 |

> **Action Items**
>
> - 테스트 코드 작성 능력 기르기 (책 완독!!)
> - 팀에게 가장 필요한 테스트부터 작성해보기 (일찍, 조금씩, 자주)

## Questions

- 단기적인 개발 속도와 장기적인 코드 안정성을 어떻게 균형 있게 유지해야 할까? (개발 속도를 유지하면서도 테스트를 지속적으로 도입하는 전략)
- GPT와 Copilot과 같은 AI를 활용하면 테스트 작성 시간을 줄일 수 있을까?
